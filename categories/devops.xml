<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>ImportError (devops)</title><link>http://k4ml.github.io</link><description></description><atom:link href="http://k4ml.github.io/categories/devops.xml" type="application/rss+xml" rel="self"></atom:link><language>en</language><lastBuildDate>Sat, 20 Jun 2015 12:11:36 GMT</lastBuildDate><generator>Nikola &lt;http://getnikola.com/&gt;</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Ansible log</title><link>http://k4ml.github.io/posts/ansible-log.html</link><description>&lt;div&gt;&lt;p&gt;Ansible is an example of clash between sysadmin and developer mentality.&lt;br&gt;
Sysadmin tend to think about system as a whole while developer always think 
about their specific apps. While developer want to isolate, sysadmin want to 
'propagate', if I can use such term.&lt;/p&gt;
&lt;p&gt;I want to try ansible and see if it can be a better alternative to Fabric. The 
first thing to do of course to install it. Since I'd already have my deployment 
tools environment based on buildout, I want to install ansible using my 
buildout config, rather than making it system-wide, or even 'user-wide' (mean 
install it to my &lt;code&gt;$HOME&lt;/code&gt; dir). I don't want to pollute my $HOME, let alone the 
system. It's impossible to install ansible with buildout since it want to write 
to &lt;code&gt;/usr/share/ansible&lt;/code&gt; and buildout will raise &lt;code&gt;SandboxViolationError&lt;/code&gt; 
exception.&lt;/p&gt;
&lt;div class="sidebar"&gt;
&lt;p class="first sidebar-title"&gt;What is virtualenv &amp;amp; pip ?&lt;/p&gt;
&lt;p class="last"&gt;
    Virtualenv allow you to create isolated python environment and pip is
    command line tools to download Python packages from websites such as
    PyPI.
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Fortunately it's still installable through pip and also work inside virtualenv.&lt;br&gt;
Running buildout under virtualenv still raise &lt;code&gt;SandboxViolationError&lt;/code&gt; though.  Enough rant, let's get started:-&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="n"&gt;virtualenv&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ansible&lt;/span&gt;
&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ansible&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;ansible&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I spent quite sometime reading ansible docs to finally grasp the concept of 
inventory. It's a place (a text file) where you define all the servers you want 
to manage. By default ansible will look in &lt;code&gt;/etc/ansible/hosts&lt;/code&gt; file. You can 
change this through configuration file &lt;a href="http://www.ansibleworks.com/docs/faq.html#id7"&gt;$HOME/.ansible.cfg&lt;/a&gt; and 
set the value &lt;a href="https://github.com/ansible/ansible/blob/devel/examples/ansible.cfg"&gt;hostfile       = /etc/ansible/hosts&lt;/a&gt;.&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;hosts&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;pipz&lt;/span&gt;
&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;Add main user&lt;/span&gt;
  &lt;span class="l-Scalar-Plain"&gt;user&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;name=kamal&lt;/span&gt;
        &lt;span class="l-Scalar-Plain"&gt;home=/home/kamal&lt;/span&gt;

&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;Set up authorized key for kamal&lt;/span&gt;
  &lt;span class="l-Scalar-Plain"&gt;authorized_key&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;user=kamal&lt;/span&gt;
                  &lt;span class="l-Scalar-Plain"&gt;state=present&lt;/span&gt;
                  &lt;span class="l-Scalar-Plain"&gt;key="{{ item }}"&lt;/span&gt;
  &lt;span class="l-Scalar-Plain"&gt;with_file&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;/home/kamal/.ssh/id_rsa-do.pub&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Error: Host declaration is required&lt;/p&gt;
&lt;p&gt;&lt;a href="https://groups.google.com/forum/#!topic/ansible-project/QFDzbr3vGD0"&gt;Missing tasks&lt;/a&gt;&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;hosts&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;pipz&lt;/span&gt;
  &lt;span class="l-Scalar-Plain"&gt;tasks&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;Add main user&lt;/span&gt;
      &lt;span class="l-Scalar-Plain"&gt;user&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;name=kamal&lt;/span&gt;
            &lt;span class="l-Scalar-Plain"&gt;home=/home/kamal&lt;/span&gt;

    &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;Set up authorized key for kamal&lt;/span&gt;
      &lt;span class="l-Scalar-Plain"&gt;authorized_key&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;user=kamal&lt;/span&gt;
                      &lt;span class="l-Scalar-Plain"&gt;state=present&lt;/span&gt;
                      &lt;span class="l-Scalar-Plain"&gt;key="{{ item }}"&lt;/span&gt;
      &lt;span class="l-Scalar-Plain"&gt;with_file&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
        &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;/home/kamal/.ssh/id_rsa-do.pub&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="code"&gt;&lt;pre&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ansible&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;playbook&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;ansible_hosts&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ini&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;http://lextoumbourou.com/blog/posts/getting-started-with-ansible/#part-3&lt;/p&gt;&lt;/div&gt;</description><category>ansible</category><category>sysadmin</category><category>devops</category><category>python</category><guid>http://k4ml.github.io/posts/ansible-log.html</guid><pubDate>Tue, 24 Sep 2013 18:34:04 GMT</pubDate></item></channel></rss>